<div class="w-full">
  <form [formGroup]="filterForm">
    <p-toolbar styleClass="mb-6">
      <ng-template #start>
        <div class="flex items-center gap-2">
          <div>
            <label class="block font-bold mb-1">Por empresa</label>
            <p-select [options]="listaEmpresas" formControlName="empresaSelecionada" optionLabel="razaoSocial"
              optionValue="id" placeholder="Selecione a empresa">
            </p-select>
          </div>
          <div class="flex-4">
            <label class="block font-bold mb-1">Data Início</label>
            <p-datepicker formControlName="dtInicio" showIcon iconDisplay="input" dateFormat="dd/mm/yy" />
          </div>
          <div class="flex-4">
            <label class="block font-bold mb-1">Data Fim</label>
            <p-datepicker formControlName="dtFim" showIcon iconDisplay="input" dateFormat="dd/mm/yy" />
          </div>
          <div class="flex-4" style="margin-top: 20px;">
            <p-button label="Cosultar" (onClick)="aplicarFiltros()" />
          </div>
        </div>
      </ng-template>
    </p-toolbar>
  </form>
</div>

<div class="grid grid-cols-12 gap-8">
  <div class="col-span-12 xl:col-span-6">
    <!-- Gráfico de Torta -->
    <div class="card flex flex-col items-center p-4">
      <div class="font-semibold text-xl mb-4">Visitas por Status</div>
      <app-dashboard-torta [filtros]="filtrosSelecionados"></app-dashboard-torta>
    </div>
  </div>
  <div class="col-span-12 xl:col-span-6">
    <!-- Gráfico de Barras -->
    <div style="height: 390px;" class="card flex flex-col items-center p-4 " >
      <div class="font-semibold text-xl mb-4">Visitas Diárias / Mensais</div>
      <app-dashboard-grafico [filtros]="filtrosSelecionados"></app-dashboard-grafico>
    </div>
  </div>
</div>

<div  style="margin-top:30px ;">
  <p-table
  [value]="graficoEmpresa" 
  [responsiveLayout]="'scroll'"
    [scrollable]="true">
    <ng-template pTemplate="header">
      <tr>
        <th>Empresa</th>
        <th *ngFor="let data of datas">{{ data }}</th>
      </tr>
    </ng-template>
    
    <ng-template pTemplate="body" let-empresa>
      <tr>
        <td>{{ empresa.empresaNome }}</td>
        <td *ngFor="let data of datas">{{ empresa.totais[data] || 0 }}</td>
      </tr>
    </ng-template>
  </p-table>
</div>