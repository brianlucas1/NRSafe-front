<p-dialog [(visible)]="visible" [modal]="true" header="Cadastrar Novo Cliente" [style]="{width: '60vw'}" (onHide)="onHideDialog()">
  <ng-template pTemplate="content">
    <form [formGroup]="clienteForm" class="grid gap-4">
      <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
        <div>
          <label class="block font-bold mb-1">CNPJ</label>
          <input pInputText formControlName="cnpj" class="w-full" />
        </div>
        <div>
          <label class="block font-bold mb-1">Razão Social</label>
          <input pInputText formControlName="razaoSocial" class="w-full" />
        </div>
      </div>
      <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
        <div>
          <label class="block font-bold mb-1">CPF</label>
          <input pInputText formControlName="cpf" class="w-full" />
        </div>
        <div>
          <label class="block font-bold mb-1">E-mail</label>
          <input pInputText formControlName="email" class="w-full" />
        </div>
      </div>

      <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
        <div>
          <label class="block font-bold mb-1">CEP</label>
          <input pInputText formControlName="cep" class="w-full" />
        </div>
        <div>
          <label class="block font-bold mb-1">Telefone</label>
          <input pInputText formControlName="telefone" class="w-full" />
        </div>
      </div>

      <div class="pt-3 border-t">
        <div class="flex items-center justify-between mb-2">
          <h3 class="text-base font-semibold">Selecionar Plano</h3>
          <p-selectButton [options]="billingOptions" formControlName="billingCycle" optionLabel="label"
            optionValue="value"></p-selectButton>
        </div>

        <div class="grid md:grid-cols-1 gap-3">
          <p-card *ngFor="let plano of listaPlano" class="cursor-pointer border transition-shadow" [ngClass]="{
              'ring-2 ring-primary-400 border-primary-300 shadow-md': clienteForm.value.planoId === +plano.id,
              'border-surface-200': clienteForm.value.planoId !== +plano.id
            }" (click)="onSelectPlano(plano.id)">
            <div class="flex items-start justify-between">
              <div class="flex items-start gap-3">
                <p-radioButton name="planoId" formControlName="planoId" [value]="+plano.id"
                  [inputId]="'plano-' + plano.id" (onClick)="onSelectPlano(plano.id)"></p-radioButton>

                <label class="cursor-pointer" [for]="'plano-' + plano.id">
                  <div class="font-semibold">{{ plano.nomePlano }}</div>
                  <div class="text-xs text-muted-color" *ngIf="plano.descPlano">
                    {{ plano.descPlano }}
                  </div>
                </label>
              </div>

              <div class="text-right min-w-[120px]">
                <div class="text-lg font-semibold">
                  {{ preco(plano) | currency:'BRL':'symbol-narrow' }}
                </div>
                <div class="text-xs text-muted-color">
                  / {{ clienteForm.value.billingCycle === 'ANUAL' ? 'ano' : 'mês' }}
                </div>
              </div>
            </div>
          </p-card>
        </div>
      </div>

    </form>
  </ng-template>

  <ng-template pTemplate="footer">
    <p-button label="Cancelar" icon="pi pi-times" (onClick)="visible = false" text></p-button>
    <p-button label="Salvar" icon="pi pi-check" (onClick)="salvar()"></p-button>
  </ng-template>
</p-dialog>

